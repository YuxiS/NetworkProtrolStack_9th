<center> <font size=6>OLSR协议分析</font>  </center>

## 1.概述

<p style= "text-indent:2em">最佳链路状态路由协议（Optimized Link State Routing Protocol，OLSR），是专门为无线移动Ad Hoc网络提出来的一种标准化的先验式的优化链路状态路由协议。</p>
<p style="text-indent:2em">OLSR由传统LSR路由协议改进而来。传统链路状态协议每个节点通过周期性的交换链路状态信息维护整个网络的拓扑信息。在OLSR协议中，网络中的每个节点只选择对称邻居节点的一个子集作为多点中继集MPR（Multipoint Relay），只有被选为MPR的节点才产生并转发TC（Topology Control）分组，同时OLSR只利用MPR节点到MS（MPR Selector）节点之间的链路状态信息来建立最短路由，这样很大程度上减少了转发的信息，减少了网络中洪泛的控制信息。</p>

## 2.协议的主要流程

### 2.2.1 链路感知

<p style= "text-indent:2em">因为无线电传播的不确定性可能会导致一些链路是单向的，所以每个节点必须检测自己和邻居节点之间的链接是否是双向的，也就是在两个方向上都能传输数据。本地链路信息表存储了到邻居的链接的信息，完善这一集合的过程称为“链路感知”。链路感知通过HELLO分组的周期性交互实现，当一个节点收到HELLO分组时，更新自身的本地链路信息表。</p>

### 2.2.2 邻居侦听

<p style= "text-indent:2em">每个节点必须检测与哪些邻居节点具有双向链路，节点周期性地广播HELLO分组。HELLO分组用来侦听邻居节点的状态，分布在一跳范围内转播，不能被转发。如图1-1所示，在初始化阶段，节点B广播HELLO分组，当节点A收到这个分组之后，将B放入到自己的邻居节点集中，并标记A到B链路状态为非对称的；然后A广播HELLO分组，其中包含B是A的邻居节点且B到A的链路状态为非对称这一信息，当B收到这一分组时，会在自己的邻居集中将到A的链路状态更新为对称；当B再次广播HELLO分组，A收到这一分组就会将邻居集中的A到B的链路状态更新为对称的。</p>

<img src="C:\Users\HP\AppData\Roaming\Typora\typora-user-images\image-20191210210527413.png" alt="image-20191210210527413"  />

### 2.2.3 MPR选择

<p style= "text-indent:2em">OLSR采用MPR机制对路由信息进行选择性的洪泛。网络中的每个节点选择自己的一跳对称邻居节点的子集作为中继节点，即MPR，而该节点本身作为MS节点。</p>

<p style= "text-indent:2em">计算MPR集需要知道自身一跳和两跳邻居的信息。一跳邻居信息通过HELLO分组来获取。对于节点i的一跳邻居节点j来说，i的一跳邻居节点（除j）就是j的二跳邻居节点，所以节点i在发送HELLO分组时附上自己的一跳邻居节点列表，当节点j收到来自i的分组时，就获得了节点j的两跳邻居节点信息。</p>
<p style= "text-indent:2em">MPR集应满足以下两点要求：节点与MPR之间必须是一跳双向链路；节点能通过MPR集到达所有的严格两跳邻居节点。</p>

### 2.2.4 TC分组处理

<p style= "text-indent:2em">该协议的链路感知和邻居侦听部分基本上为每个节点提供了一个可以直接与之通信的邻居列表，并结合分组格式和转发部分，通过MPRs提供了一个优化的泛洪机制。</p>
<p style= "text-indent:2em">在此基础上，通过网络传播拓扑信息。TC分组由MPRs广播和转发。MPR节点每隔一段时间就向全网洪泛TC消息来维护网络拓扑信息。</p>

### 2.2.5路由表的计算与维护

<p style= "text-indent:2em">网络中的每一个节点都维护一个路由表，路由表的计算是基于节点维护的本地链路信息表和拓扑集。因此，如果本地链路信息表和拓扑表发生变动时，路由表会重新计算并更新表项。在OLSR标准协议中，协议根据最小跳数建立每个节点的路由表。任意一个节点的路由表添加过程如下：首先，添加对称链路的一跳邻居节点；然后，添加两跳邻居节点；最后，循环添加跳数等于h+1（h=2开始）的节点进入路由表。</p>



## 3.OLSR的优点和局限性：

* OLSR协议是一种先应式路由协议，具有查找路由延时小的优点。

* OLSR用于移动自组织网络，MPR的实现极大的减小了网络中的控制流量，特别适用大型密集型移动网络，而且网络越大，效果越好。

* OLSR最初就是为以完全分布式方式工作，不依赖任何中心实体。

* OLSR不需要对IP数据包做任何修改。

  

  